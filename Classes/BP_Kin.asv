classdef BP_Kin < handle
    %BP_Kin This class generates the kinematic equations for the motion of the ball
    %   Detailed explanation goes here
    
    properties
        
        vb2s
        ab2s
        Psi2vs
        vp2s
        ap2s
        
    end
   
    properties (SetAccess = private)
        VDefs
        UJ_Kin
    end 
    
    methods
        function obj = BP_Kin(Var_Defs, UJ_Kin)
            %UNTITLED Construct an instance of this class
            %   Detailed explanation goes here
            
            
            %Assign the inputs to the constructor to the class properties
            obj.VDefs = Var_Defs;          
            obj.UJ_Kin = UJ_Kin;

        end
        
        
        function [vb2s, ab2s, constr_eqn_rws, Psi2vs] = derive_B_kin(obj)
            %UNTITLED Construct an instance of this class
            %   Detailed explanation goes here 
            
            %Substitute the ball's displacement vector in the S2 (plate) frame for the
            %arbitrary dispaclement vector r2 of the u-joint kinematics velocity equation
            obj.vb2s = subs(obj.UJ_Kin.v2s, obj.VDefs.symFunVec_r2, obj.VDefs.symFunVec_rb2);
            
            %Substitute the ball's displacement vector in the S2 (plate) frame for the
            %arbitrary dispaclement vector r2 of the u-joint kinematics acceleration equation
            obj.ab2s = subs(obj.UJ_Kin.a2s, obj.VDefs.symFunVec_r2, obj.VDefs.symFunVec_rb2);
            
            %Rollling without slip constraint equation
            constr_eqn_rws = diff(obj.VDefs.rb2s,obj.VDefs.t,1) == cross(obj.VDefs.Psi2vs, obj.VDefs.armb2s); %Contraint Equation Rolling Without Slip (RWS)
            
            
            %Retrieve a Psi2vs symbolic variable from VDefs object
            obj.Psi2vs = obj.VDefs.Psi2vs;
            %Isolate Psi2vs components in the constraint equations to get an expression
            %for the balls angular velocity in terms of its linear velocities (all
            %expressed in the S2 basis)
            obj.Psi2vs(1) = rhs(isolate(constr_eqn_rws(2), obj.VDefs.Psi2vs(1)));
            obj.Psi2vs(2) = rhs(isolate(constr_eqn_rws(1), obj.VDefs.Psi2vs(2)));
            
            %Return output
            vb2s = obj.vb2s;
            ab2s = obj.ab2s;
            Psi2vs = obj.Psi2vs;
            
        end 
        
        function [vp2s, ap2s] = derive_P_kin(obj)  
            %UNTITLED Construct an instance of this class
            %   Detailed explanation goes here
            
            %Substitute the ball's displacement vector in the S2 (plate) frame for the
            %arbitrary dispaclement vector r2 of the u-joint kinematics velocity equation
            obj.vp2s = subs(obj.UJ_Kin.v2s, obj.VDefs.symFunVec_r2, obj.VDefs.symFunVec_rp2);
            ap2s = subs(UJKin.a2s, VDefs.symFunVec_r2, VDefs.symFunVec_rp2);
            
            
        end
        
        function [] = derive_both(obj)
            %UNTITLED Construct an instance of this class
            %   Detailed explanation goes here 
            
           
            
        end
        
    end
end

